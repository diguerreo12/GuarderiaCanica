<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Checkout - Guarder√≠a Canina</title>

  <!-- Favicon de la p√°gina -->
  <link rel="icon" type="image/png" href="recursos/Imagenes/Logo_perrito.png">

  <!-- Enlace a la hoja de estilos -->
  <link rel="stylesheet" href="css/styles.css">
</head>
<body>
  <!-- Encabezado con barra de navegaci√≥n -->
  <header>
    <nav>
      <ul>
        <!-- Logo de la p√°gina -->
        <li><a href="/index.html" class="logo"><img src="/recursos/Imagenes/Logo_perrito.png" alt="logo"></a></li>
        
        <!-- Enlaces de navegaci√≥n -->
        <li><a href="productos.html">Productos</a></li>
        <li><a href="nosotros.html">Nosotros</a></li>
        <li><a href="pages/contact.html">Servicios y Horarios</a></li>
        
        <!-- Bot√≥n del carrito -->
        <li><button id="cart-button">üõí Carrito</button></li>
      </ul>
    </nav>
  </header>
  
  <!-- Contenido principal -->
  <main>
    <section id="checkout-section">
      <h2>Formulario de Pago y Env√≠o</h2>

      <!-- Productos agregados al carrito -->
      <div id="productos-agregados">
        <h3>Productos en tu carrito</h3>
        <table id="carrito-table">
          <thead>
            <tr>
              <th>Producto</th>
              <th>Cantidad</th>
              <th>Precio</th>
              <th>Total</th>
              <th>Acciones</th> 
            </tr>
          </thead>
          <tbody>
            <!-- Aqu√≠ se cargar√°n los productos agregados -->
          </tbody>
        </table>
        <p id="total-pagar">Total a pagar: $0</p>
      </div>

      <!-- Formulario para ingresar datos de env√≠o y pago -->
      <form id="checkout-form">
        
        <!-- Informaci√≥n del cliente -->
        <div class="form-group">
          <label for="nombre">Nombre completo</label>
          <input type="text" id="nombre" name="nombre" required>
        </div>
        
        <div class="form-group">
          <label for="direccion">Direcci√≥n de env√≠o</label>
          <input type="text" id="direccion" name="direccion" required>
        </div>

        <div class="form-group">
          <label for="ciudad">Ciudad</label>
          <input type="text" id="ciudad" name="ciudad" required>
        </div>

        <div class="form-group">
          <label for="codigo-postal">C√≥digo Postal</label>
          <input type="text" id="codigo-postal" name="codigo-postal" required>
        </div>

        <div class="form-group">
          <label for="telefono">N√∫mero de Tel√©fono</label>
          <input type="tel" id="telefono" name="telefono" required>
        </div>

        <!-- M√©todos de pago disponibles -->
        <h3>M√©todos de Pago</h3>
        <div class="form-group">
          <label for="banco">Seleccione su banco:</label>
          <select id="banco" name="banco" required>
            <option value="">Seleccione un banco</option>
            <option value="banco1">Banco Nacional</option>
            <option value="banco2">Banco Popular</option>
            <option value="banco3">Banco Interamericano</option>
            <option value="banco4">Banco de Am√©rica</option>
            <option value="banco5">Banco Central</option>
          </select>
        </div>

        <div class="form-group">
          <label for="numero-tarjeta">N√∫mero de tarjeta</label>
          <input type="text" id="numero-tarjeta" name="numero-tarjeta" maxlength="16" placeholder="1234 5678 9123 4567" required>
        </div>

        <div class="form-group">
          <label for="fecha-expiracion">Fecha de Expiraci√≥n</label>
          <input type="month" id="fecha-expiracion" name="fecha-expiracion" required>
        </div>

        <div class="form-group">
          <label for="cvv">CVV</label>
          <input type="text" id="cvv" name="cvv" maxlength="3" required>
        </div>

        <!-- Costos de env√≠o -->
        <h3>Costos de Env√≠o</h3>
        <div class="form-group">
          <label for="envio">Seleccione un m√©todo de env√≠o:</label>
          <select id="envio" name="envio" required>
            <option value="normal">Env√≠o Est√°ndar - $5.00</option>
            <option value="rapido">Env√≠o R√°pido - $10.00</option>
            <option value="express">Env√≠o Express - $15.00</option>
          </select>
        </div>

        <!-- Bot√≥n para finalizar compra -->
        <button type="submit" class="checkout-btn">Finalizar Compra</button>
      </form>
    </section>
  </main>

  <!-- Pie de p√°gina -->
  <footer>
    <p>Guarder√≠a de Mascotas - Todos los derechos reservados</p>
  </footer>

  <!-- Script para gestionar el carrito y el proceso de pago -->
  <script>
    // Simulando productos en el carrito
    let productosEnCarrito = [
      { id: 1, nombre: 'Shampoo Canino', cantidad: 2, precio: 10 },
      { id: 2, nombre: 'Collar Antipulgas', cantidad: 1, precio: 15 },
      { id: 3, nombre: 'Juguete de Goma', cantidad: 3, precio: 5 }
    ];

    // Funci√≥n para cargar productos en la tabla del carrito
    function cargarProductosEnCarrito() {
      const tbody = document.querySelector('#carrito-table tbody');
      tbody.innerHTML = ''; 
      let totalPagar = 0;

      productosEnCarrito.forEach(producto => {
        const totalProducto = producto.cantidad * producto.precio;
        totalPagar += totalProducto;

        const fila = document.createElement('tr');
        fila.innerHTML = `
          <td>${producto.nombre}</td>
          <td>${producto.cantidad}</td>
          <td>$${producto.precio.toFixed(2)}</td>
          <td>$${totalProducto.toFixed(2)}</td>
          <td><button class="eliminar-btn" data-id="${producto.id}">Eliminar</button></td>
        `;
        tbody.appendChild(fila);
      });

      document.getElementById('total-pagar').textContent = `Total a pagar: $${totalPagar.toFixed(2)}`;
    }

    // Funci√≥n para eliminar producto del carrito
    function eliminarProducto(idProducto) {
      productosEnCarrito = productosEnCarrito.filter(producto => producto.id !== idProducto);
      cargarProductosEnCarrito(); 
    }

    // Cargar los productos al cargar la p√°gina
    window.onload = function() {
      cargarProductosEnCarrito();

      // Listener para eliminar productos
      document.querySelector('#carrito-table').addEventListener('click', function(event) {
        if (event.target.classList.contains('eliminar-btn')) {
          const idProducto = parseInt(event.target.getAttribute('data-id'));
          eliminarProducto(idProducto);
        }
      });
    };

    // Manejar la finalizaci√≥n de la compra
    document.getElementById('checkout-form').addEventListener('submit', function(event) {
      event.preventDefault();
      alert("Compra realizada con √©xito. ¬°Gracias por tu pedido!");
      window.location.href = "productos.html"; // Redirigir a la p√°gina de productos
    });
  </script>
</body>
</html>
